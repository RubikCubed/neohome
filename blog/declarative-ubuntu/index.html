<!doctype html><html lang=en-au dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en-au"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="rgb(255,255,255)"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Declarative Ubuntu &#183; ayats.org</title><meta name=title content="Declarative Ubuntu &#183; ayats.org"><meta name=description content="Experiment to have a Ubuntu installation managed declaratively, instead of imperatively"><link rel=canonical href=https://viperml.github.io/neohome/blog/declarative-ubuntu/><link type=text/css rel=stylesheet href=/neohome/css/main.bundle.min.fe55d6f12d2d2e255e5716286799ad15cc522e11824fca6c256aed07a6a05b70710c064ee687aad95b205021be30d92ec0f1207941aaffc7918da302d21cd9e5.css integrity="sha512-/lXW8S0tLiVeVxYoZ5mtFcxSLhGCT8psJWrtB6agW3BxDAZO5oeq2VsgUCG+MNkuwPEgeUGq/8eRjaMC0hzZ5Q=="><script type=text/javascript src=/neohome/js/appearance.min.c6198a5ecbc6c7b35a8568d29315f50cf5d775d4461c515a476359767f1a745c245aa83fa96b0c7d83da976cf77481e1fc29537a2391a53ffe69a991638802e6.js integrity="sha512-xhmKXsvGx7NahWjSkxX1DPXXddRGHFFaR2NZdn8adFwkWqg/qWsMfYPal2z3dIHh/ClTeiORpT/+aamRY4gC5g=="></script>
<script defer type=text/javascript id=script-bundle src=/neohome/js/main.bundle.min.6d78c827ca7bcbf72056dbf698bf9aeb759a08966686187deb23f5949f73eca5f39b461284900cdfc08e2976d99eb80a8663648de778ba2a83e633ae16dbfc25.js integrity="sha512-bXjIJ8p7y/cgVtv2mL+a63WaCJZmhhh96yP1lJ9z7KXzm0YShJAM38COKXbZnrgKhmNkjed4uiqD5jOuFtv8JQ==" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/neohome/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/neohome/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/neohome/favicon-16x16.png><link rel=manifest href=/neohome/site.webmanifest><meta property="og:title" content="Declarative Ubuntu"><meta property="og:description" content="Experiment to have a Ubuntu installation managed declaratively, instead of imperatively"><meta property="og:type" content="article"><meta property="og:url" content="https://viperml.github.io/neohome/blog/declarative-ubuntu/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-06-19T10:03:20+00:00"><meta property="article:modified_time" content="2022-06-19T10:03:20+00:00"><meta property="og:site_name" content="ayats.org"><meta name=twitter:card content="summary"><meta name=twitter:title content="Declarative Ubuntu"><meta name=twitter:description content="Experiment to have a Ubuntu installation managed declaratively, instead of imperatively"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Blog","name":"Declarative Ubuntu","headline":"Declarative Ubuntu","abstract":"Experiment to have a Ubuntu installation managed declaratively, instead of imperatively","inLanguage":"en-au","url":"https:\/\/viperml.github.io\/neohome\/blog\/declarative-ubuntu\/","author":{"@type":"Person","name":"Fernando Ayats"},"copyrightYear":"2022","dateCreated":"2022-06-19T10:03:20\u002b00:00","datePublished":"2022-06-19T10:03:20\u002b00:00","dateModified":"2022-06-19T10:03:20\u002b00:00","keywords":["ubuntu"],"mainEntityOfPage":"true","wordCount":"1048"}]</script><meta name=author content="Fernando Ayats"><link href=https://twitter.com/ rel=me><link href=https://facebook.com/ rel=me><link href=https://linkedin.com/ rel=me><link href=https://youtube.com/ rel=me></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral print:hidden sm:py-10"><nav class="flex items-start justify-between sm:items-center"><div class="flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/neohome>ayats.org</a></div><ul class="flex flex-col list-none ltr:text-right rtl:text-left sm:flex-row"><li class="mb-1 group sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a href=/neohome/blog/ title=Blog><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Blog</span></a></li><li class="mb-1 group sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><button id=search-button-1 title="Search (/)">
<span class="transition-colors group-dark:hover:text-primary-400 group-hover:text-primary-600"><span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"></span></button></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header class=max-w-prose><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/neohome/>Welcome to Congo! :tada:</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/neohome/blog/>Blog</a><span class="px-1 text-primary-500">/</span></li><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/neohome/blog/declarative-ubuntu/>Declarative Ubuntu</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Declarative Ubuntu</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-06-19 10:03:20 +0000 UTC">19 June 2022</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">5 mins</span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="min-w-0 min-h-0 max-w-fit grow"><h1 id=declarative-ubuntu class="relative group">Declarative Ubuntu <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#declarative-ubuntu aria-label=Anchor>#</a></span></h1><p><em>&ldquo;Add this PPA to be aple to install some package&mldr;&rdquo;</em></p><p><em>&ldquo;Enable foo.service, and write this to /etc/some/path/to/be/forgotten &mldr;&rdquo;</em></p><p>Every undocumented action we do into our systems, nears them into an more unknown state. Even if these modifications are very clear in the present, will you remember about them in a few weeks? What about other people that work on the same system?</p><p>Like a vacuum cleaner, the OS collects &ldquo;state&rdquo;, that we could define as modifications from the original system, that are the result of commands ran by humans, or by its autonomous operations. Of course, there is some state that we are are interested in: the database of our application, its logs, etc. But should every single file on the disk, be able to aquire state? I wouldn&rsquo;t say so.</p><p>For Linux, the elephant in the room is <code>/etc</code>. Citing the FHS:</p><blockquote><p>/etc : Host-specific system configuration</p><p>Purpose: The /etc hierarchy contains configuration files. (&mldr;)</p></blockquote><p>With such a vague definition, what I take a way is <strong>Host-specific</strong>, as in configuration files that are only needed for my specific system. Therefore, a default Linux system would come with an empty <code>/etc</code>, and it would be filled with configuration files as we use it and manually configure it!</p><p>This is far from the reality, as with a quick look into any Linux distribution we see a lot of non-host-specific configuration files. The question then is, which of these files were modified by me, and which came preinstalled?</p><p>The solution that I propose is having a system, where the user&rsquo;s configuration files are not mixed with the default configuration files. With a system like this, the problem of &ldquo;collecting state&rdquo; vanishes: every file from my distro can be safely wiped and recreated, as it is &ldquo;stateless&rdquo;, and combined with my &ldquo;configuration&rdquo; it results in the system.</p><p>Because of how <code>/etc</code> is layed out in current distros won&rsquo;t change any time soon, the key concept that glues this together is: indiscriminate removal of state. Wiping everything in the filesystem, and rebuilding the system for scratch on a weekly or monthly basis can help us prevent the problem of accumulating &ldquo;state&rdquo;, undocumented changes to the system.</p><h2 id=apt-metapackage class="relative group">Apt metapackage <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#apt-metapackage aria-label=Anchor>#</a></span></h2><p>The most straightforward solution could be to set up a metapackage, such that everything in the system, is ultimately a dependency of this metapackage.</p><p>For example:</p><ul><li><code>configuration.deb</code></li><li>Depends on: every installed package that you want in your system.</li><li>Includes every modification to <code>/etc</code></li></ul><p>Therefore, the entire system is the result of installing it, into a &ldquo;blanket&rdquo; system. The administration workflow is converted:</p><ul><li>Installing packages into adding as a dependency to out metapackage</li><li>Modifying files in <code>/etc</code> or with commands into modifying the source of the metapackage.</li></ul><p>As everything can be reproduced* by this package, we can discard the entire filesystem every week or month, to make sure it doesn&rsquo;t collect state (modifications to this configuration, not tracked by the metapackage). In any case, you may want to keep *some* state, like some subfolder of <code>/var</code> or <code>/home</code>. For my experiment, I used ZFS subvolumes that get mounted into these locations.</p><h2 id=stage0-stage1-stage2 class="relative group">stage0, stage1, stage2 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#stage0-stage1-stage2 aria-label=Anchor>#</a></span></h2><p>For Ubuntu specifically, I came up with 3 steps. Ideally we would have just 1 step, such that the system can be installed from an empty tree.</p><ul><li>Minimal Ubuntu debootstrap (stage 0)</li><li><code>stage1.deb</code>, configures <code>apt</code> before installing more packages</li><li><code>stage2.deb</code> installs every dependency of the system, and every configuration file</li></ul><p>You can find the source code for the experiment in <a href=https://github.com/viperML/ubuntu-declarative target=_blank rel="noreferrer noopener">github.com/viperML/ubuntu-declarative</a>, so I don&rsquo;t copy-paste everything into this blog.</p><p>The folder structure is as follows:</p><pre tabindex=0><code>├── stage1
│  ├── DEBIAN
│  │  └── control
│  └── etc
│     └── apt
│        ├── apt.conf.d
│        │  ├── 00stage1
│        │  └── 99release
│        ├── preferences.d
│        │  └── stage1
│        ├── sources.list.d
│        │  ├── graphics-drivers-ubuntu-ppa.list
│        │  ├── microsoft.list
│        │  └── release.list
│        └── trusted.gpg.d
│           ├── graphics-drivers-ubuntu-ppa.gpg
│           └── microsoft.gpg
├── stage1.deb
</code></pre><p>The <code>control</code> file, would have the contents:</p><pre tabindex=0><code>Package: stage2
Version: 1.0.1
Architecture: amd64
Maintainer: Anonymous
Description: No description
Depends: linux-generic, linux-image-generic, linux-headers-generic, linux-firmware,
  cryptsetup, dracut, zfs-dracut,
  keyboard-configuration, console-setup, console-setup-linux, kbd,
  iproute2, network-manager,
  sudo, vim, curl, git, man, manpages, strace, neofetch,
  software-properties-common,
  nvidia-driver-510,
  kde-plasma-desktop, kubuntu-wallpapers, plasma-nm, ark,
  flatpak,
  nix-setup-systemd,
  code
</code></pre><p>This metapackages can be trivially built with</p><pre tabindex=0><code>dpkg-deb --build --root-owner-group stage1 stage1.deb
</code></pre><h3 id=setting-up-the-users class="relative group">Setting up the users <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#setting-up-the-users aria-label=Anchor>#</a></span></h3><p>Instead adding your user imperatively, or as some post-install hook, you can use <code>systemd-sysusers</code> to automatically add your user:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=c1># stage2/etc/sysusers.d/ayats.conf</span>
</span></span><span class=line><span class=cl><span class=na>u ayats 1000:100 &#34;Fernando Ayats&#34; /home/ayats /usr/bin/bash</span>
</span></span></code></pre></div><p>This won&rsquo;t set any password, but you can also set automatic login to tty or your display manager:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=c1># stage2/etc/systemd/system/getty@.service.d/autologin.conf</span>
</span></span><span class=line><span class=cl><span class=k>[Service]</span>
</span></span><span class=line><span class=cl><span class=na>X-RestartIfChanged</span><span class=o>=</span><span class=s>false</span>
</span></span><span class=line><span class=cl><span class=na>ExecStart</span><span class=o>=</span>
</span></span><span class=line><span class=cl><span class=na>ExecStart</span><span class=o>=</span><span class=s>@/usr/sbin/agetty agetty &#39;--login-program&#39; &#39;/usr/bin/login&#39; &#39;--autologin&#39; &#39;ayats&#39; --noclear --keep-baud %I 115200,38400,9600 $TERM</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=c1># stage2/etc/sddm.conf.d/autologin.conf</span>
</span></span><span class=line><span class=cl><span class=k>[Autologin]</span>
</span></span><span class=line><span class=cl><span class=na>User</span><span class=o>=</span><span class=s>ayats</span>
</span></span><span class=line><span class=cl><span class=na>Session</span><span class=o>=</span><span class=s>plasma</span>
</span></span></code></pre></div><h3 id=bootloader-and-initrd class="relative group">Bootloader and initrd <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#bootloader-and-initrd aria-label=Anchor>#</a></span></h3><p>For my specific hardware, this took longer than expected. From my very little experience, it seems that the default <code>initramfs</code> that Ubuntu comes with, uses a script that tries to get information from the running system to build it. As I was building it from a Docker image, chrooted into the filesystem tree, it failed pretty quickly.</p><p>My solution was to use <code>dracut</code>, and making sure it builds a generic <code>initramfs</code> to boot.</p><p>As for the bootloader, I didn&rsquo;t install any, as my <code>EFI</code> partition already had systemd-boot working. So a script was tasked with copying the kernels and initrd&rsquo;s into the ESP, and adding the boot entry.</p><h2 id=closing-thoughts class="relative group">Closing thoughts <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#closing-thoughts aria-label=Anchor>#</a></span></h2><p>Just by having all the configuration in a monorepo, instead of running imperative commands, we gain some features for free. For example, having the system git-tracked allows us to know when we made some change, revert it, or even share it with other people to help debug some problem.</p><p>With the advent of Fedora Silverblue, being claimed as an &ldquo;immutable&rdquo; distro, isn&rsquo;t it also prone to having a dirty <code>/etc</code>, with mixed host-specific and non-host-specific files? What is immutable about that? Moreover, is our experiment &ldquo;more immutable&rdquo;? Given that it can&rsquo;t be modified, as any modification is easily reverted by reconstructing it from scratch.</p><p>If you like this concept, give NixOS a try, as this way of managing the system is the default. By using symlinks, it can recreate the root filesystem from scratch, without any prior knowledge of what is in <code>/etc</code> .</p></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=flex><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt="Fernando Ayats" src=/neohome/img/author_hu052d24d60828c1cca42a6aefe45b8b44_54195_192x192_fill_q75_box_smart1.jpg><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Fernando Ayats</div><div class="text-sm text-neutral-700 dark:text-neutral-400">This is an example author bio, and although there&rsquo;s a stock photo of a dog here, this article was actually created by a human. 🐶</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://twitter.com/ target=_blank aria-label=Twitter rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://facebook.com/ target=_blank aria-label=Facebook rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://linkedin.com/ target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://youtube.com/ target=_blank aria-label=Youtube rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg></span></a></div></div></div></div></footer></article></main><footer class="py-10 print:hidden"><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">© 2023 Fernando Ayats</p></div><div class="cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher-0 type=button aria-label="appearance switcher"><div class="flex items-center justify-center w-12 h-12 dark:hidden" title="Switch to dark appearance"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden w-12 h-12 dark:flex" title="Switch to light appearance"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div></footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://viperml.github.io/neohome><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>